<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>BusinessName | Expert Strategic Solutions</title>
    <meta name="description" content="Strategic consulting and technical solutions for modern enterprise growth.">
    <meta name="keywords" content="Business Consulting, Cloud Development, Market Intelligence">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --primary-bg: #1e1e1e;
            --card-bg: #2d2d2d;
            --accent-teal: #00bcd4;
            --text-main: #ffffff;
            --text-dim: #b0b0b0;
            --input-bg: #3d3d3d;
            --chart-text: #b0b0b0;
            --error-color: #ff6b6b;
            --success-color: #4caf50;
        }

        body.light-theme {
            --primary-bg: #f4f4f4;
            --card-bg: #ffffff;
            --text-main: #1a1a1a;
            --text-dim: #555555;
            --input-bg: #e0e0e0;
            --chart-text: #555555;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-main);
            margin: 0;
            transition: background-color 0.3s, color 0.3s;
        }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }

        header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; }

        .hero { text-align: center; padding: 80px 0; }

        .btn-primary {
            background-color: var(--accent-teal);
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            transition: 0.2s;
        }
        
        .btn-primary:hover { opacity: 0.8; transform: translateY(-2px); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--accent-teal);
            color: var(--accent-teal);
            padding: 12px 26px;
            border-radius: 30px;
            text-decoration: none;
            margin-left: 10px;
            font-weight: bold;
            transition: 0.2s;
        }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 40px; }

        .card { background: var(--card-bg); padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }

        .portfolio-img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; }

        input, textarea { 
            width: 100%; 
            padding: 14px; 
            margin: 10px 0; 
            background: var(--input-bg); 
            border: 1px solid rgba(255,255,255,0.1); 
            color: var(--text-main); 
            border-radius: 10px; 
            box-sizing: border-box;
            font-family: inherit;
        }

        input::placeholder, textarea::placeholder { color: var(--text-dim); }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-teal);
        }

        /* Error Message Styling */
        .error-message {
            color: var(--error-color);
            font-size: 0.85rem;
            margin: -8px 0 10px 0;
            display: none;
        }

        /* Success Popup */
        #success-alert {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 2000;
            animation: slideIn 0.5s ease;
        }

        /* Error Alert */
        #error-alert {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--error-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 2000;
            animation: slideIn 0.5s ease;
        }

        .loading-spinner {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes slideIn { 
            from { transform: translateX(100%); } 
            to { transform: translateX(0); } 
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .rate-info {
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-top: 5px;
        }
    </style>
</head>
<body>

<div id="success-alert" role="alert" aria-live="polite"><strong>Success!</strong> Your request has been sent.</div>
<div id="error-alert" role="alert" aria-live="assertive"><strong>Error!</strong> <span id="error-message"></span></div>

<div class="container">
    <header>
        <strong style="font-size: 1.5rem;">BusinessName</strong>
        <button id="theme-toggle" class="btn-primary" style="padding: 8px 18px; font-size: 13px;" aria-label="Toggle theme">Light Mode</button>
    </header>

    <section class="hero">
        <h1>Scale Your Vision</h1>
        <p style="color: var(--text-dim); margin-bottom: 30px;">Strategic consulting and technical solutions for modern growth.</p>
        <a href="#contact" class="btn-primary">Consult With Us</a>
        <a href="#" class="btn-outline">Download Proposal</a>
    </section>

    <div class="grid">
        <div class="card" style="border-top: 4px solid var(--accent-teal);">
            <h3>Currency Intelligence</h3>
            <p style="font-size: 0.8rem; color: var(--text-dim);">Live USD/NGN Market Data</p>
            <div id="rate-display" style="color: var(--accent-teal); font-weight: bold; font-size: 1.2rem;">
                <span class="loading-spinner"></span> Fetching rate...
            </div>
            <div class="rate-info" id="rate-info"></div>
            <input type="number" id="usd-input" placeholder="USD Amount" min="0" step="0.01" aria-label="USD amount input">
            <div id="ngn-result" style="font-weight: bold; margin-top: 10px; font-size: 1.1rem;">0.00 NGN</div>
        </div>
        <div class="card">
            <h3>Project Success Rates</h3>
            <div id="chart-container" style="position: relative; height: 250px;">
                <canvas id="strategyChart"></canvas>
            </div>
        </div>
    </div>

    <div class="grid" id="contact">
        <div class="card">
            <h3>Contact Us</h3>
            <form id="contact-form" novalidate>
                <input type="text" id="full-name" placeholder="Full Name" required aria-label="Full name">
                <div class="error-message" id="name-error">Please enter a valid name (min 2 characters)</div>
                
                <input type="email" id="email-address" placeholder="Email Address" required aria-label="Email address">
                <div class="error-message" id="email-error">Please enter a valid email address</div>
                
                <textarea id="project-message" placeholder="Tell us about your project..." rows="3" required aria-label="Project description"></textarea>
                <div class="error-message" id="message-error">Please describe your project (min 10 characters)</div>
                
                <button type="button" id="send-request" class="btn-primary" style="width: 100%;" aria-label="Send contact request">Send Request</button>
            </form>
        </div>
        <div class="card">
            <h3>Our Strategy</h3>
            <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=400&h=300&fit=crop" class="portfolio-img" alt="Strategy Analytics visualization showing data-driven insights">
            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--text-dim);">Data-driven insights to boost ROI.</p>
        </div>
    </div>

    <p class="footer-note" style="text-align: center; padding: 40px; color: var(--text-dim);">© 2026 BusinessName Solutions Ltd.</p>
</div>

<script>
    // Configuration
    const CONFIG = {
        FOREX_API_URL: 'https://open.er-api.com/v6/latest/USD',
        FOREX_CACHE_KEY: 'forexData',
        FOREX_CACHE_DURATION: 3600000, // 1 hour in milliseconds
        FORM_VALIDATION: {
            minNameLength: 2,
            minMessageLength: 10
        }
    };

    // ========== 1. THEME TOGGLE WITH MEMORY ==========
    const themeBtn = document.getElementById('theme-toggle');
    
    function initTheme() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.body.classList.add('light-theme');
            themeBtn.textContent = 'Dark Mode';
        }
    }
    
    themeBtn.addEventListener('click', () => {
        document.body.classList.toggle('light-theme');
        const isLight = document.body.classList.contains('light-theme');
        themeBtn.textContent = isLight ? 'Dark Mode' : 'Light Mode';
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
        updateChartTheme();
    });

    initTheme();

    // ========== 2. LIVE FOREX LOGIC (USD to NGN) ==========
    let exchangeRate = null;
    let lastFetchTime = 0;

    function getCachedForexData() {
        const cached = localStorage.getItem(CONFIG.FOREX_CACHE_KEY);
        if (cached) {
            const data = JSON.parse(cached);
            const age = Date.now() - data.timestamp;
            if (age < CONFIG.FOREX_CACHE_DURATION) {
                return data;
            }
        }
        return null;
    }

    function setCachedForexData(rate) {
        localStorage.setItem(CONFIG.FOREX_CACHE_KEY, JSON.stringify({
            rate,
            timestamp: Date.now()
        }));
    }

    async function getRates() {
        const rateDisplay = document.getElementById('rate-display');
        const rateInfo = document.getElementById('rate-info');
        
        try {
            // Check cache first
            const cached = getCachedForexData();
            if (cached) {
                exchangeRate = cached.rate;
                rateDisplay.textContent = `1 USD = ₦${exchangeRate.toFixed(2)}`;
                rateInfo.textContent = '(Cached data)';
                setupCurrencyConverter();
                return;
            }

            const controller = new AbortController();
            const timeout = setTimeout(() => controller.abort(), 8000); // 8 second timeout

            const res = await fetch(CONFIG.FOREX_API_URL, { signal: controller.signal });
            clearTimeout(timeout);

            if (!res.ok) {
                throw new Error(`API returned status ${res.status}`);
            }

            const data = await res.json();

            if (!data.rates || !data.rates.NGN || typeof data.rates.NGN !== 'number') {
                throw new Error('Invalid API response format');
            }

            exchangeRate = data.rates.NGN;
            setCachedForexData(exchangeRate);
            
            rateDisplay.textContent = `1 USD = ₦${exchangeRate.toFixed(2)}`;
            rateInfo.textContent = `(Updated: ${new Date().toLocaleTimeString()})`;
            
            setupCurrencyConverter();
        } catch (error) {
            console.error('Forex API Error:', error);
            
            // Try to use cached data as fallback
            const cached = localStorage.getItem(CONFIG.FOREX_CACHE_KEY);
            if (cached) {
                const data = JSON.parse(cached);
                exchangeRate = data.rate;
                rateDisplay.textContent = `1 USD = ₦${exchangeRate.toFixed(2)}`;
                rateInfo.textContent = '(Offline - Cached data)';
                setupCurrencyConverter();
            } else {
                rateDisplay.textContent = 'Unable to fetch rates';
                rateInfo.textContent = 'Please check your connection and refresh';
            }
        }
    }

    function setupCurrencyConverter() {
        if (!exchangeRate) return;

        const usdInput = document.getElementById('usd-input');
        const ngnResult = document.getElementById('ngn-result');

        usdInput.addEventListener('input', (e) => {
            const amount = parseFloat(e.target.value) || 0;
            if (amount < 0) {
                e.target.value = 0;
                return;
            }
            const total = amount * exchangeRate;
            ngnResult.textContent = `₦${total.toLocaleString(undefined, {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            })}`;
        });
    }

    // Initialize forex rates on page load
    window.addEventListener('load', getRates);
    // Refresh rates every 30 minutes
    setInterval(getRates, 30 * 60 * 1000);

    // ========== 3. CHART WITH THEME SUPPORT ==========
    let strategyChart = null;

    function initChart() {
        const ctx = document.getElementById('strategyChart');
        if (!ctx) {
            console.error('Chart canvas element not found');
            return;
        }

        const isDark = !document.body.classList.contains('light-theme');
        const textColor = isDark ? '#b0b0b0' : '#555555';

        try {
            strategyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Consulting', 'Development', 'Marketing'],
                    datasets: [{
                        label: 'Success %',
                        data: [98, 92, 88],
                        backgroundColor: '#00bcd4',
                        borderRadius: 5,
                        barPercentage: 0.7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                color: textColor,
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            grid: {
                                color: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)'
                            }
                        },
                        x: {
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        } catch (error) {
            console.error('Chart initialization error:', error);
            document.getElementById('chart-container').innerHTML = '<p style="color: var(--text-dim);">Unable to load chart</p>';
        }
    }

    function updateChartTheme() {
        if (!strategyChart) return;

        const isDark = !document.body.classList.contains('light-theme');
        const textColor = isDark ? '#b0b0b0' : '#555555';

        if (strategyChart.options.scales?.y?.ticks) {
            strategyChart.options.scales.y.ticks.color = textColor;
        }
        if (strategyChart.options.scales?.x?.ticks) {
            strategyChart.options.scales.x.ticks.color = textColor;
        }
        if (strategyChart.options.scales?.y?.grid) {
            strategyChart.options.scales.y.grid.color = isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)';
        }

        strategyChart.update();
    }

    // Initialize chart when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChart);
    } else {
        initChart();
    }

    // ========== 4. FORM VALIDATION & SUBMISSION ==========
    const validateEmail = (email) => {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email.trim());
    };

    const validateForm = () => {
        let isValid = true;

        // Validate Name
        const nameInput = document.getElementById('full-name');
        const nameError = document.getElementById('name-error');
        if (nameInput.value.trim().length < CONFIG.FORM_VALIDATION.minNameLength) {
            nameError.style.display = 'block';
            nameInput.focus();
            isValid = false;
        } else {
            nameError.style.display = 'none';
        }

        // Validate Email
        const emailInput = document.getElementById('email-address');
        const emailError = document.getElementById('email-error');
        if (!validateEmail(emailInput.value)) {
            emailError.style.display = 'block';
            if (isValid) emailInput.focus();
            isValid = false;
        } else {
            emailError.style.display = 'none';
        }

        // Validate Message
        const messageInput = document.getElementById('project-message');
        const messageError = document.getElementById('message-error');
        if (messageInput.value.trim().length < CONFIG.FORM_VALIDATION.minMessageLength) {
            messageError.style.display = 'block';
            if (isValid) messageInput.focus();
            isValid = false;
        } else {
            messageError.style.display = 'none';
        }

        return isValid;
    };

    const sendRequest = document.getElementById('send-request');

    sendRequest.addEventListener('click', async (e) => {
        e.preventDefault();

        if (!validateForm()) {
            showErrorAlert('Please fill in all fields correctly');
            return;
        }

        const name = document.getElementById('full-name').value.trim();
        const email = document.getElementById('email-address').value.trim();
        const message = document.getElementById('project-message').value.trim();

        // Disable button and show loading state
        sendRequest.disabled = true;
        const originalText = sendRequest.textContent;
        sendRequest.textContent = 'Sending...';

        try {
            // In production, replace this with your actual backend endpoint
            const formData = { name, email, message, timestamp: new Date().toISOString() };
            console.log('Form submitted:', formData);

            // Simulated API call
            await new Promise(resolve => setTimeout(resolve, 500));

            showSuccessAlert();
            document.getElementById('contact-form').reset();
        } catch (error) {
            console.error('Form submission error:', error);
            showErrorAlert('Failed to send request. Please try again.');
        } finally {
            sendRequest.disabled = false;
            sendRequest.textContent = originalText;
        }
    });

    const showSuccessAlert = () => {
        const alert = document.getElementById('success-alert');
        alert.style.display = 'block';
        setTimeout(() => alert.style.display = 'none', 4000);
    };

    const showErrorAlert = (message) => {
        const alert = document.getElementById('error-alert');
        document.getElementById('error-message').textContent = message;
        alert.style.display = 'block';
        setTimeout(() => alert.style.display = 'none', 5000);
    };

    // ========== 5. UTILITY: Keyboard navigation ==========
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            document.getElementById('success-alert').style.display = 'none';
            document.getElementById('error-alert').style.display = 'none';
        }
    });
</script>
</body>
</html>